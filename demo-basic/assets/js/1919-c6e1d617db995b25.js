(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1919],{18139:function(e){var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,o=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,l=/^\s+|\s+$/g;function trim(e){return e?e.replace(l,""):""}e.exports=function(e,l){if("string"!=typeof e)throw TypeError("First argument must be a string");if(!e)return[];l=l||{};var u=1,s=1;function updatePosition(e){var t=e.match(n);t&&(u+=t.length);var r=e.lastIndexOf("\n");s=~r?e.length-r:s+e.length}function position(){var e={line:u,column:s};return function(t){return t.position=new Position(e),match(r),t}}function Position(e){this.start=e,this.end={line:u,column:s},this.source=l.source}Position.prototype.content=e;var d=[];function error(t){var n=Error(l.source+":"+u+":"+s+": "+t);if(n.reason=t,n.filename=l.source,n.line=u,n.column=s,n.source=e,l.silent)d.push(n);else throw n}function match(t){var n=t.exec(e);if(n){var r=n[0];return updatePosition(r),e=e.slice(r.length),n}}function comments(e){var t;for(e=e||[];t=comment();)!1!==t&&e.push(t);return e}function comment(){var t=position();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;""!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,""===e.charAt(n-1))return error("End of comment missing");var r=e.slice(2,n-2);return s+=2,updatePosition(r),e=e.slice(n),s+=2,t({type:"comment",comment:r})}}return match(r),function(){var e,n=[];for(comments(n);e=function(){var e=position(),n=match(o);if(n){if(comment(),!match(i))return error("property missing ':'");var r=match(a),l=e({type:"declaration",property:trim(n[0].replace(t,"")),value:r?trim(r[0].replace(t,"")):""});return match(c),l}}();)!1!==e&&(n.push(e),comments(n));return n}()}},14721:function(e,t,n){"use strict";var r=n(72253),o=n(47702),i=n(85893),a=n(94184),c=n.n(a),l=n(37298),u=n(38173),s=n.n(u);t.Z=function(e){var t=e.className,n=(0,o._)(e,["className"]);return(0,i.jsx)(l.Z,(0,r._)({className:c()(s().root,t),format:"promo",sizesAt0:"house"},n))}},15678:function(e,t,n){"use strict";n.d(t,{Z:function(){return V}});var r=n(72253),o=n(82729),i=n(85893),a=n(67294),c=n(76163),l=n(32654),u=n(77984),s=n(51486),d=n(49187),f=n(14932),m=n(47702),p=n(24043),g=n(94184),h=n.n(g),v=n(30991),_=n(77339),x=n(64773),A=n(38053),w=n.n(A);function _templateObject(){var e=(0,o._)(["\n  ",'\n  fragment articleInlineVideo on ArticleInlineVideo {\n    ...articleInlineFigure\n    altText\n    captionText\n    width\n    height\n    formats {\n      encoding\n      url\n    }\n    poster(height: 800) {\n      url\n    }\n    reducedMotionImage: poster(height: 400, sizes: ["1x", "2x"]) {\n      src: url\n      width\n      height\n      srcSet\n    }\n  }\n']);return _templateObject=function(){return e},e}var I=(0,a.forwardRef)(function(e,t){var n=e.width,o=e.height,c=e.formats,l=e.poster,u=e.reducedMotionImage,s=e.altText,d=(0,m._)(e,["width","height","formats","poster","reducedMotionImage","altText"]),g="".concat((100*o/n).toFixed(2),"%"),A=(0,p._)((0,a.useState)(!1),2),I=A[0],b=A[1];return(0,i.jsx)(v.Z,(0,f._)((0,r._)({ref:t,width:n,height:o},d),{children:(0,i.jsxs)("div",{className:h()(w().wrapper,I&&w().loaded),style:{paddingBottom:g},children:[(0,i.jsx)(_.Z,{width:n,height:o,poster:l?{url:l.url}:void 0,formats:c,className:w().video,onLoadedMetadata:function(){return b(!0)}}),u&&(0,i.jsx)(x.Z,(0,r._)({alt:s,className:h()(w().reducedMotionImage,w().image),lazy:!0},u))]})}))});I.fragment=(0,c.Ps)(_templateObject(),v.Z.fragment);var b=n(29297),j=n(30145),y=n(67700);function ArticleFullBleedInlineImage_templateObject(){var e=(0,o._)(["\n  ",'\n\n  fragment articleFullBleedInlineImage on ArticleFullBleedInlineImage {\n    ...articleInlineImageFigure\n    crop(\n      width: 1600\n      sizes: ["640w", "750w", "850w", "928w", "1536w", "1856w"]\n    ) {\n      url\n      width\n      height\n      srcSet\n      reducedMotionSrcSet\n    }\n    clickthroughUrl\n  }\n']);return ArticleFullBleedInlineImage_templateObject=function(){return e},e}var k=(0,a.forwardRef)(function(e,t){var n,o=e.url,a=e.srcSet,c=e.width,l=e.height,u=e.crop,s=(0,m._)(e,["url","srcSet","width","height","crop"]);return u&&(o=u.url,c=u.width,l=u.height,a=u.srcSet),(0,i.jsx)(j.Z,(0,r._)({url:o,ref:t,srcSet:a,width:c,height:l,sizes:u?"(min-width: 1600px) 1600px, 100vw":void 0,alignment:y.fh.Fullbleed,reducedMotionSrcSet:null!==(n=null==u?void 0:u.reducedMotionSrcSet)&&void 0!==n?n:void 0},s))});k.fragment=(0,c.Ps)(ArticleFullBleedInlineImage_templateObject(),j.Z.fragment);var M=n(52196),B=n(42783),O=n(5217),S=n(72009),C=n(89135),P=n(2891),R=n.n(P),E=n(12544),F=n.n(E),T=n(13542);function ArticleBooksDropdown_templateObject(){var e=(0,o._)(["\n  fragment articleBooksDropdown on BookReview {\n    title\n    bookshopIsbn\n    tertuliaIsbn\n    asin\n    isbn13\n  }\n"]);return ArticleBooksDropdown_templateObject=function(){return e},e}var ArticleBooksDropdown=function(e){var t=e.index,n=e.toggleMenu,r=e.showDrop,o=e.bookshopIsbn,a=e.tertuliaIsbn,c=e.asin,l=e.isbn13,u=e.handleBlur;return(0,i.jsxs)("div",{className:h()(F().root,F().menuContainer),"data-event-module":"affiliate module",onBlur:function(e){e.currentTarget.contains(e.relatedTarget)||u()},"data-event-view":!0,children:[(0,i.jsx)("button",{className:h()(F().button,r&&F().activeButton),onClick:function(){return n()},"aria-haspopup":!0,"aria-controls":"expanded-buy-books-menu-".concat(t),"aria-expanded":r,"aria-label":r?"Close Buy Book Menu":"Open Buy Book Menu","data-event-verb":r?"closed":"expanded","data-event-element":"carrot",children:"Buy Book"}),r&&(0,i.jsx)("ul",{id:"expanded-buy-books-menu-".concat(t),className:F().dropDownContainer,children:[{label:"Bookshop.org",isbn:o,getUrl:T.QU},{label:"Amazon",isbn:c,getUrl:T.Ve},{label:"Tertulia",isbn:a,getUrl:T.WQ},{label:"Apple Books",isbn:l,getUrl:T.il}].filter(function(e){return void 0!==e.isbn}).map(function(e,t){return(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:e.getUrl(e.isbn),rel:"noopener noreferrer",target:"_blank","data-event-position":t+1,children:e.label})},t)})})]})};function ArticleBooksModule_templateObject(){var e=(0,o._)(["\n  ",'\n\n  fragment articleBooksModuleBookReview on BookReview {\n    title\n    creator\n    bookshopIsbn\n    tertuliaIsbn\n    asin\n    image(height: 120, sizes: ["1x", "2x"]) {\n      url\n      width\n      height\n      srcSet\n      altText\n    }\n  }\n\n  fragment articleBooksModule on ArticleInlineReviews {\n    reviews {\n      __typename\n      ... on BookReview {\n        ...articleBooksModuleBookReview\n        ...articleBooksDropdown\n      }\n    }\n  }\n']);return ArticleBooksModule_templateObject=function(){return e},e}ArticleBooksDropdown.fragment=(0,c.Ps)(ArticleBooksDropdown_templateObject());var bookReducer=function(e,t){switch(t.type){case"toggle":return e===t.book?null:t.book;case"close-all":return null}},useBookDropdown=function(){var e=(0,p._)((0,a.useReducer)(bookReducer,null),2),t=e[0],n=e[1];return(0,a.useEffect)(function(){var close=function(e){"Escape"===e.key&&n({type:"close-all"})};return window.addEventListener("keydown",close),function(){return window.removeEventListener("keydown",close)}},[n]),{activeBook:t,dispatch:n}},Book=function(e){var t=e.i,n=e.activeBook,o=e.dispatch,a=e.book;return(0,i.jsxs)("div",{className:h()(R().book,0===t&&R().firstBook,!a.image&&R().noImage),"data-view-action":"view - affiliate module","data-view-label":a.title,"data-event-module":"affiliate module",children:[a.image&&(0,i.jsx)("a",{href:(0,T.iL)(a),rel:"noopener noreferrer","data-event-element":"book cover",target:"_blank",children:(0,i.jsx)("picture",{className:h()(R().picture),children:(0,i.jsx)(x.Z,{lazy:!0,className:R().image,width:a.image.width,height:a.image.height,alt:a.image.altText||"",src:a.image.url,srcSet:a.image.srcSet})})}),(0,i.jsxs)("div",{className:h()(R().textWrapper),children:[(0,i.jsx)("div",{className:R().title,children:(0,i.jsx)("a",{className:R().link,href:(0,T.iL)(a),rel:"noopener noreferrer","data-event-element":"book title",target:"_blank",children:a.title})}),a.creator&&(0,i.jsxs)("div",{className:R().creator,children:["By ",a.creator]})]}),(0,i.jsx)("div",{className:R().button,children:(0,i.jsx)(ArticleBooksDropdown,(0,r._)({toggleMenu:function(){return o({type:"toggle",book:a})},handleBlur:function(){o({type:"close-all"})},showDrop:a===n,index:t},a))})]},"book-".concat(t))},G=(0,a.forwardRef)(function(e,t){var n=e.reviews,o=e.className,c=n.filter(function(e){return"BookReview"===e.__typename}),l=useBookDropdown();return c&&c.length?(0,i.jsx)("section",{className:h()(R().root,o),ref:t,children:c.map(function(e,t){return(0,a.createElement)(Book,(0,f._)((0,r._)({book:e},l),{key:t,i:t}))})}):null});G.fragment=(0,c.Ps)(ArticleBooksModule_templateObject(),ArticleBooksDropdown.fragment);var D=n(33143),N=n.n(D);function ArticleImageGroup_templateObject(){var e=(0,o._)(["\n  ","\n\n  fragment articleImageGroup on ArticleImageGroup {\n    groupAlign: alignment\n    captionText\n    attributionText\n  }\n"]);return ArticleImageGroup_templateObject=function(){return e},e}var L=(0,a.forwardRef)(function(e,t){var n,o=e.groupAlign,a=e.attributionText,c=e.captionText,l=e.images,u=e.className;switch(o){case y.OF.Well:n=N().alignWell;break;case y.OF.Overflow:n=N().alignOverflow;break;case y.OF.Fullbleed:n=N().alignFullBleed;break;default:n=void 0}return(0,i.jsx)("div",{className:h()(N().root,n,u),"data-flatplan-image-group-alignment":null==o?void 0:o.toLowerCase(),"data-flatplan-image-group-count":l.length,children:(0,i.jsxs)("figure",{role:"group",className:N().figure,ref:t,children:[(0,i.jsx)("div",{className:N().images,children:l.map(function(e,t){return"ArticleInlineImage"===e.__typename?(0,i.jsx)(j.Z,(0,r._)({alignment:"GROUP"},e),e.url):"ArticleInlineVideo"===e.__typename?(0,i.jsx)(I,(0,r._)({alignment:"GROUP"},e),t):null})}),(a||c)&&(0,i.jsx)("figcaption",{className:h()(N().figcaption,a&&!c&&N().credit),dangerouslySetInnerHTML:a&&!c?{__html:a}:c&&!a?{__html:c}:void 0,children:a&&c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:N().credit,dangerouslySetInnerHTML:{__html:a}}),(0,i.jsx)("div",{className:N().captionWithCredit,dangerouslySetInnerHTML:{__html:c}})]}):void 0})]})})});function ArticleOverflowImageGroup_templateObject(){var e=(0,o._)(["\n  ","\n  ","\n  ",'\n\n  fragment articleOverflowImageGroup on ArticleOverflowImageGroup {\n    ...articleImageGroup\n    images {\n      ... on ArticleInlineVideo {\n        ...articleInlineVideo\n      }\n      ... on ArticleInlineImage {\n        ...articleInlineImageFigure\n        clickthroughUrl\n        crop(width: 928, sizes: ["385w", "483w", "785w", "966w", "1570w"]) {\n          url\n          width\n          height\n          srcSet\n          reducedMotionSrcSet\n        }\n      }\n    }\n  }\n']);return ArticleOverflowImageGroup_templateObject=function(){return e},e}L.fragment=(0,c.Ps)(ArticleImageGroup_templateObject(),j.Z.fragment);var Z=(0,a.forwardRef)(function(e,t){var n=e.images,o=(0,m._)(e,["images"]),a=["(min-width: 982px) calc((982px - ".concat(16*(n.length-1),"px) / ").concat(n.length,")"),"(min-width: 786px) calc((100vw - ".concat(16*(n.length-1),"px) / ").concat(n.length,")"),"100vw"].join(", "),c=n.map(function(e){if("ArticleInlineVideo"===e.__typename)return e;var t=e.crop,n=(0,m._)(e,["crop"]);return t?(0,f._)((0,r._)({},n),{sizes:a,url:t.url,width:t.width,height:t.height,srcSet:t.srcSet}):n});return(0,i.jsx)(L,(0,r._)({ref:t,images:c,groupAlign:y.OF.Overflow},o))});function ArticleFullBleedImageGroup_templateObject(){var e=(0,o._)(["\n  ","\n  ","\n  ",'\n\n  fragment articleFullBleedImageGroup on ArticleFullBleedImageGroup {\n    ...articleImageGroup\n    images {\n      ... on ArticleInlineVideo {\n        ...articleInlineVideo\n      }\n      ... on ArticleInlineImage {\n        ...articleInlineImageFigure\n        clickthroughUrl\n        crop(\n          width: 800\n          sizes: ["640w", "785w", "850w", "928w", "1570w", "1856w"]\n        ) {\n          url\n          width\n          height\n          srcSet\n          reducedMotionSrcSet\n        }\n      }\n    }\n  }\n']);return ArticleFullBleedImageGroup_templateObject=function(){return e},e}Z.fragment=(0,c.Ps)(ArticleOverflowImageGroup_templateObject(),L.fragment,j.Z.fragment,I.fragment);var z=(0,a.forwardRef)(function(e,t){var n=e.images,o=(0,m._)(e,["images"]),a=["(min-width: 1600px) calc((1600px - ".concat(16*(n.length-1),"px) / ").concat(n.length,")"),"(min-width: 786px) calc((100vw - ".concat(16*(n.length-1),"px) / ").concat(n.length,")"),"100vw"].join(", "),c=n.map(function(e){if("ArticleInlineVideo"===e.__typename)return e;var t=e.crop,n=(0,m._)(e,["crop"]);return t?(0,f._)((0,r._)({},n),{sizes:a,url:t.url,width:t.width,height:t.height,srcSet:t.srcSet}):n});return(0,i.jsx)(L,(0,r._)({ref:t,images:c,groupAlign:y.OF.Fullbleed},o))});function ArticleWellImageGroup_templateObject(){var e=(0,o._)(["\n  ","\n  ","\n  ",'\n\n  fragment articleWellImageGroup on ArticleWellImageGroup {\n    ...articleImageGroup\n    images {\n      ... on ArticleInlineVideo {\n        ...articleInlineVideo\n      }\n      ... on ArticleInlineImage {\n        ...articleInlineImageFigure\n        clickthroughUrl\n        crop(\n          width: 655\n          sizes: ["210w", "325w", "655w", "750w", "850w", "928w", "1310w"]\n        ) {\n          url\n          width\n          height\n          srcSet\n          reducedMotionSrcSet\n        }\n      }\n    }\n  }\n']);return ArticleWellImageGroup_templateObject=function(){return e},e}z.fragment=(0,c.Ps)(ArticleFullBleedImageGroup_templateObject(),L.fragment,j.Z.fragment,I.fragment);var H=(0,a.forwardRef)(function(e,t){var n=e.images,o=(0,m._)(e,["images"]),a=["(min-width: 786px) calc((665px - ".concat(16*(n.length-1),"px) / ").concat(n.length,")"),"(min-width: 713px) 655px","(min-width: 576px) calc(100vw - 48px)","100vw"].join(", "),c=n.map(function(e){if("ArticleInlineVideo"===e.__typename)return e;var t=e.crop,n=(0,m._)(e,["crop"]);return t?(0,f._)((0,r._)({},n),{sizes:a,url:t.url,width:t.width,height:t.height,srcSet:t.srcSet}):n});return(0,i.jsx)(L,(0,r._)({ref:t,images:c,groupAlign:y.OF.Well},o))});function ArticleContentElement_templateObject(){var e=(0,o._)(["\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n\n  fragment articleContentElement on ArticleContentElement {\n    __typename\n    ...articleInlineVideo\n    ...articleInlineImage\n    ...articleOverflowInlineImage\n    ...articleWellInlineImage\n    ...articleFullBleedInlineImage\n    ...articleLegacyHtml\n    ...articlePullquote\n    ...articleRelatedContentModule\n    ...articleParagraph\n    ...articleRelatedContentLink\n    ...articleHeading\n    ...articleBooksModule\n    ...articleOverflowImageGroup\n    ...articleFullBleedImageGroup\n    ...articleWellImageGroup\n  }\n"]);return ArticleContentElement_templateObject=function(){return e},e}H.fragment=(0,c.Ps)(ArticleWellImageGroup_templateObject(),L.fragment,j.Z.fragment,I.fragment);var U=(0,a.forwardRef)(function(e,t){return(0,i.jsx)("div",(0,r._)({ref:t},e))}),W=(0,a.forwardRef)(function(e,t){switch(e.__typename){case"ArticleParagraphContent":return(0,i.jsx)(l.Z,(0,r._)({ref:t},e));case"ArticleHeading":return(0,i.jsx)(S.Z,(0,r._)({ref:t},e));case"ArticleRelatedContentLink":return(0,i.jsx)(u.Z,(0,r._)({ref:t},e));case"ArticlePullquote":return(0,i.jsx)(s.Z,(0,r._)({ref:t},e));case"ArticleInlineImage":return(0,i.jsx)(d.Z,(0,r._)({ref:t},e));case"ArticleInlineVideo":return(0,i.jsx)(I,(0,r._)({ref:t},e));case"ArticleWellInlineImage":return(0,i.jsx)(M.Z,(0,r._)({ref:t},e));case"ArticleOverflowInlineImage":return(0,i.jsx)(b.Z,(0,r._)({ref:t},e));case"ArticleFullBleedInlineImage":return(0,i.jsx)(k,(0,r._)({ref:t},e));case"ArticleRelatedContentModule":return(0,i.jsx)(B.Z,(0,r._)({ref:t},e));case"ArticleOverflowImageGroup":return(0,i.jsx)(Z,(0,r._)({ref:t},e));case"ArticleFullBleedImageGroup":return(0,i.jsx)(z,(0,r._)({ref:t},e));case"ArticleWellImageGroup":return(0,i.jsx)(H,(0,r._)({ref:t},e));case"ArticleAdPlaceholder":return(0,i.jsx)(C.Z,(0,r._)({targetingPos:"manual-injector",ref:t},e));case"ArticleInlineReviews":return(0,i.jsx)(G,(0,r._)({ref:t},e));case"ArticleLegacyHtml":return(0,i.jsx)(O.Z,(0,r._)({ref:t},e));default:return(0,i.jsx)(U,{ref:t})}});W.displayName="ArticleContentElement",W.fragment=(0,c.Ps)(ArticleContentElement_templateObject(),I.fragment,d.Z.fragment,b.Z.fragment,M.Z.fragment,k.fragment,O.Z.fragment,s.Z.fragment,B.Z.fragment,l.Z.fragment,u.Z.fragment,S.Z.fragment,G.fragment,Z.fragment,z.fragment,H.fragment);var V=W},29297:function(e,t,n){"use strict";var r=n(72253),o=n(47702),i=n(82729),a=n(85893),c=n(67294),l=n(76163),u=n(30145),s=n(67700);function _templateObject(){var e=(0,i._)(["\n  ",'\n\n  fragment articleOverflowInlineImage on ArticleOverflowInlineImage {\n    ...articleInlineImageFigure\n    crop(\n      width: 928\n      sizes: ["640w", "750w", "850w", "928w", "1536w", "1856w"]\n    ) {\n      url\n      width\n      height\n      srcSet\n      reducedMotionSrcSet\n    }\n    clickthroughUrl\n  }\n']);return _templateObject=function(){return e},e}var d=(0,c.forwardRef)(function(e,t){var n,i=e.url,c=e.srcSet,l=e.width,d=e.height,f=e.crop,m=(0,o._)(e,["url","srcSet","width","height","crop"]);return f&&(i=f.url,l=f.width,d=f.height,c=f.srcSet),(0,a.jsx)(u.Z,(0,r._)({url:i,ref:t,srcSet:c,width:l,height:d,sizes:f?"(min-width: 982px) 928px, (min-width: 786px) calc(100vw - 54px), 100vw":void 0,alignment:s.fh.Overflow,reducedMotionSrcSet:null!==(n=null==f?void 0:f.reducedMotionSrcSet)&&void 0!==n?n:void 0},m))});d.fragment=(0,l.Ps)(_templateObject(),u.Z.fragment),t.Z=d},13542:function(e,t,n){"use strict";n.d(t,{QU:function(){return getBookshopUrl},Ve:function(){return getAmazonUrl},WQ:function(){return getTertuliaUrl},iL:function(){return getPurchaseUrl},il:function(){return getAppleBooksUrl}}),n(67294);var getPurchaseUrl=function(e){var t=e.bookshopIsbn,n=e.tertuliaIsbn,r=e.asin;return t?getBookshopUrl(t):n?getTertuliaUrl(n):getAmazonUrl(r)},getAmazonUrl=function(e){return"https://www.amazon.com/dp/".concat(e,"/?tag=theatl0c-20")},getBookshopUrl=function(e){return"https://bookshop.org/a/12476/".concat(e)},getTertuliaUrl=function(e){return"https://web.tertulia.com/book/".concat(e,"?affiliate=atl-347")},getAppleBooksUrl=function(e){return"https://goto.applebooks.apple/".concat(e,"?itsct=atlantic_books&itscg=30200&at=1010l3bkk")}},78874:function(e,t,n){"use strict";n.d(t,{ZP:function(){return E},Kz:function(){return useClientSideInjector}});var r,o,i,a,c=n(47702),l=n(24043),u=n(82729),s=n(85893),d=n(76163),f=n(67294),m=n(67700);(r=i||(i={})).Any="Any",r.Ad="Ad",r.Native="Native",r.House="House",r.Recirc="Recirc",r.MagPromo="MagPromo",r.Archive="Archive",r.Gate="Gate",r.Context="Context",(o=a||(a={})).Begin="Begin",o.Heading="Heading",o.Figure="Figure",o.Quote="Quote",o.End="End",o.List="List",o.HorizRule="HorizRule",o.BracketedLink="BracketedLink",o.LegacyHtml="LegacyHtml",o.AdPlaceholder="AdPlaceholder",o.RecircPlaceholder="RecircPlaceholder",o.Dropcap="Dropcap",o.Salutations="Salutations",o.InjectorAvoid="InjectorAvoid",o.InlineReviews="InlineReviews";var p=n(72253),g=n(14932),h=n(248),v=function(){if(null===(e=window.location)||void 0===e?void 0:e.search.match(/debug=injector/)){var e,t=console.log.bind(window.console,"\uD83E\uDDDE‍♂️");return t.debug=console.debug.bind(window.console,"\uD83E\uDDDE‍♂️"),t.groupCollapsed=console.groupCollapsed.bind(window.console,"\uD83E\uDDDE‍♂️"),t.groupEnd=console.groupEnd.bind(window.console,"\uD83E\uDDDE‍♂️"),t}var NOOP=function(){},log1=function(){};return log1.debug=NOOP,log1.groupCollapsed=NOOP,log1.groupEnd=NOOP,log1}();function parseToPx(e){var t=window.innerHeight,n=e.substr(-2),r=e.substring(0,e.length-2);return"px"===n?parseInt(r,10):"vh"===n?parseFloat(r)/100*t:(v.debug("Couldn't parse unit for rule",e),!1)}var csi_doesMatchType=function(e,t,n,r,o){if(o&&o.length){var c=o[o.length-1];if(e===i.Any&&(null==c?void 0:c.afterIndex)===r)return v.debug("Found an injected item after position ".concat(r)),!0;if(o.find(function(t){return t.afterIndex===r&&t.type===e}))return!0}if(e===a.Heading&&t instanceof HTMLHeadingElement)return v.debug("Found heading in position ".concat(r)),!0;if(e===a.Figure&&("FIGURE"===t.tagName||"ArticleInlineImage"===n.__typename||"ArticleWellInlineImage"===n.__typename||"ArticleOverflowInlineImage"===n.__typename||"ArticleFullBleedInlineImage"===n.__typename||"ArticleWellImageGroup"===n.__typename||"ArticleOverflowImageGroup"===n.__typename||"ArticleFullBleedImageGroup"===n.__typename))return v.debug("Found figure in position ".concat(r)),!0;if(e===a.Quote&&("BLOCKQUOTE"===t.tagName||"ArticlePullquote"===n.__typename))return v.debug("Found quote in position ".concat(r)),!0;if(e===a.List&&("UL"===t.tagName||"OL"===t.tagName))return v.debug("Found list in position ".concat(r)),!0;if(e===a.HorizRule&&"HR"===t.tagName)return v.debug("Found horizontal rule in position ".concat(r)),!0;if(e===a.BracketedLink&&(null==n?void 0:n.__typename)==="ArticleRelatedContentLink"||e===a.LegacyHtml&&(null==n?void 0:n.__typename)==="ArticleLegacyHtml"||e===a.InjectorAvoid&&t.classList.contains("injector-avoid")||e===a.AdPlaceholder&&"GPT-AD"===t.tagName||e===a.RecircPlaceholder&&(null==n?void 0:n.__typename)==="ArticleRelatedContentModule"||e===a.Dropcap&&(null==n?void 0:n.__typename)==="ArticleParagraphContent"&&(null==n?void 0:n.subtype)==="DROPCAP"||e===a.InlineReviews&&(null==n?void 0:n.__typename)==="ArticleInlineReviews")return!0;if(e===a.Salutations){var l=(t.innerText||"").trim();if((null==n?void 0:n.__typename)==="ArticleParagraphContent"&&(l.endsWith(",")||l.endsWith(":")))return!0}return!1},inOverlapBlock=function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;if(e>=c.start&&e<=c.end)return c}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return null},findStart=function(e,t){if(0===e)return 0;for(var n,r=Math.min(t[e].top,null===(n=t[e+1])||void 0===n?void 0:n.top),o=e,i=e-1;i>-1;i--)if(t[i].bottom>r)o=i,t[i].top<r&&(r=t[i].top);else break;return o},findEnd=function(e,t){for(var n,r=Math.max(t[e].bottom,null===(n=t[e+1])||void 0===n?void 0:n.bottom),o=e+1,i=e+2;i<t.length;i++)if(t[i].top<r)o=i,t[i].bottom>r&&(r=t[i].bottom);else break;return o},detectOverlaps=function(e){var t=[];return e.forEach(function(n,r){if(!inOverlapBlock(r,t)){var o={start:r,end:r};e[r+1]&&n.bottom>e[r+1].top&&(o.start=findStart(r,e),o.end=findEnd(r,e)),(o.start!==r||o.end!==r)&&t.push(o)}}),t},csi_getPositions=function(e,t,n){var r=[];return e.forEach(function(e,o){if(!e.isConnected){var i=r[o-1]&&r[o-1].bottomMargin||0;r[o]={top:i,topMargin:i,bottom:i,bottomMargin:i};return}if(0===e.offsetHeight&&1===e.children.length){var c=e.children.item(0);c&&c instanceof HTMLElement&&c.offsetHeight>0&&(e=c)}var l=getComputedStyle(e),u=parseInt(l.marginTop)||0,s=parseInt(l.marginBottom)||0;if(r[o]={top:e.offsetTop,topMargin:e.offsetTop-u,bottom:e.offsetTop+e.offsetHeight,bottomMargin:e.offsetTop+e.offsetHeight+s},0===o){var d,f=null===(d=e.parentElement)||void 0===d?void 0:d.previousElementSibling;f instanceof HTMLElement&&(r[o].topMargin=r[o].top=f.offsetTop+f.offsetHeight||0)}if(csi_doesMatchType(a.Dropcap,e,t[o],o)){var m=r[o].top+(n?80:100);r[o].bottom=Math.max(m,r[o].bottom),r[o].bottomMargin=Math.max(m,r[o].bottomMargin)}}),r},_=0,afterRuleOk=function(e,t,n,r,o,c,l){if(!e.after)return{passed:!0,reason:""};for(var u="".concat(e.item===i.Any?"Injected items must":"".concat(e.item," must")," must be at least ").concat(e.after,"px AFTER ").concat(e.from,"."),s=0,d=!1,f=!1,m=t;m>=-1;m--){if(s=o[t].bottomMargin-(-1===m?o[0].topMargin:o[m].bottomMargin),-1===m){d=!0;break}if(s>=e.after&&!inOverlapBlock(m,c))break;if(csi_doesMatchType(e.from,n[m],r[m],m,l)){f=!0;break}}return s<e.after?d?e.from===a.Begin?{passed:!1,reason:"".concat(u," FAIL: We're looking for the beginning and it's too close at ").concat(s,"px")}:{passed:!0,reason:"".concat(u," PASS: Never ran into an element of ").concat(e.from," type")}:{passed:!1,reason:"".concat(u," FAIL: It's too close at ").concat(s,"px")}:{passed:!0,reason:d?"".concat(u," PASS: Reached beginning, never found ").concat(e.from," type"):f?"".concat(u," PASS: ").concat(e.from," is ").concat(s,"px away"):"".concat(u," PASS: Traveled ").concat(s,"px, didn't find ").concat(e.from)}},beforeRuleOk=function(e,t,n,r,o,c){if(!e.before)return{passed:!0,reason:""};for(var l=!1,u=0,s=!1,d="".concat(e.item===i.Any?"Injected items must":"".concat(e.item," must")," be at least ").concat(e.before,"px BEFORE ").concat(e.from,"."),f=t+1;f<=n.length;f++){var m=f===n.length;if(u=(m?o[n.length-1].bottomMargin:o[f].topMargin)-o[t+1].topMargin,m){l=!0;break}if(u>=e.before&&!inOverlapBlock(f,c))break;if(csi_doesMatchType(e.from,n[f],r[f],f)){s=!0;break}}return u<e.before?l&&e.from!==a.End?{passed:!0,reason:"".concat(d," PASS: Couldn't find item of ").concat(e.from," type, so rule passes")}:{passed:!1,reason:"".concat(d," FAIL: It's too close at ").concat(u,"px")}:{passed:!0,reason:l?"".concat(d," PASS: Reached end, never found ").concat(e.from," type"):s?"".concat(d," PASS: ").concat(e.from," is ").concat(u,"px away"):"".concat(d," PASS: Traveled ").concat(u,"px, didn't find ").concat(e.from)}};function findRelevantRules(e,t,n){return e.filter(function(e){return(e.item===i.Any||e.item===t)&&(t!==i.Gate||e.item===t)&&(void 0===e.index||e.index===n)&&(void 0===e.indexNotEqual||e.indexNotEqual!==n)})}var injectItems=function(e,t,n,r){var o,c=n.activeTestGroups,l=n.isMobile,u=n.isRecircFullWidth,s=n.injectOrderOptions,d=n.adsExperiment,f=(0,p._)({},r),m=f.injectionRules,x=f.injectionOrder;_++;var A=(m||((T=[{item:i.Any,after:"1px",before:"1px",from:a.InjectorAvoid},{item:i.Any,after:"1px",before:"1px",from:a.Quote},{item:i.Any,after:"1px",from:a.Heading},{item:i.Any,after:"1px",from:a.Salutations},{item:i.Ad,after:"".concat(Math.max(parseToPx("95vh"),200),"px"),from:i.Ad},{item:i.Ad,after:"".concat(Math.max(parseToPx("95vh"),200),"px"),before:"".concat(Math.max(parseToPx("95vh"),200),"px"),from:a.AdPlaceholder},{item:i.Any,before:"200px",from:a.End},{item:i.Any,after:"250px",before:"250px",from:a.RecircPlaceholder},{item:i.Any,index:0,before:"300px",from:a.Dropcap},{item:i.Any,after:"150px",before:"100px",from:a.Figure},{item:i.Any,before:"1px",from:a.List},{item:i.Any,before:"1px",from:a.InlineReviews},{item:i.Any,index:0,after:l?"320px":"350px",from:a.Begin},{item:i.Gate,after:"200px",from:i.Any},{item:i.Gate,after:"500px",from:a.Begin},{item:i.Context,after:"500px",from:i.Ad}]).push.apply(T,(0,h._)([{item:G=i.Recirc,after:"250px",from:i.Any},{item:G,before:"476px",from:a.Figure},{item:G,before:"1px",from:a.HorizRule},{item:G,before:"1px",from:a.Dropcap},{item:G,after:"100px",before:"100px",from:a.LegacyHtml},{item:i.Any,after:"726px",from:G}])),T)).map(function(e){var t=(0,g._)((0,p._)({},e),{before:void 0,after:void 0});if(e.before){var n=parseToPx(e.before.trim());n&&(t.before=n)}if(e.after){var r=parseToPx(e.after.trim());r&&(t.after=r)}return t}),w=x||function(e,t,n,r){var o=r.injectRecirc,a=r.injectMagPromo,c=r.injectArchiveModule,l=r.injectAds;if(r.showGate)return[i.Ad,i.Gate];if(!l){var u=[i.Context];return c&&u.push(i.Archive),o&&u.push(i.Recirc),a&&u.push(i.MagPromo),u}var s=Array(40).fill(i.Ad),d=0;return s[1]=i.Context,c&&(s[2]=i.Archive,d++),o&&(s[3+d]=i.Recirc,d++),a&&(s[4+d]=i.MagPromo,d++),s}(0,0,0,s);v("----- START CLIENT SIDE INJECTION RUN ".concat(_," -----")),v("Your browser size is ".concat(window.innerWidth," x ").concat(window.innerHeight));var I=csi_getPositions(t,e,l),b=detectOverlaps(I);v("parameters:",(0,g._)((0,p._)({},s),{isMobile:l,activeTestGroups:c,adsExperiment:d,rules:A,injectionList:w,positions:I,overlapBlocks:b}));for(var j=0,y=w[0],k=findRelevantRules(A,y,j),M=[],B=0,O=0;O<e.length-1&&y;O++){var S=inOverlapBlock(O,b),C="INJECT #".concat(j+1,":");if(S&&O!==S.end){v("".concat(C," Element ").concat(O+1," is in an overlap block, skipping"),t[O]);continue}if(I[O].topMargin===I[O].bottomMargin){v("".concat(C," Element ").concat(O+1," has 0 height, skipping"),t[O]);continue}B=O,t[O],v.groupCollapsed("".concat(C," Can we inject a ").concat(y," after article element ").concat(O+1,"? Checking ").concat(k.length," rules."),t[O]);var P=!0,R=!0,E=!1,F=void 0;try{for(var T,G,D,N=k[Symbol.iterator]();!(R=(D=N.next()).done);R=!0){var L=D.value,Z=afterRuleOk(L,O,t,e,I,b,M);if(Z.passed)Z.reason&&v("".concat(Z.reason));else{v.groupEnd(),v("  \uD83D\uDD3B ".concat(Z.reason)),P=!1;break}var z=(0,p._)({},L);z.before&&y===i.Recirc&&!u&&(z.before+=476);var H=beforeRuleOk(z,O,t,e,I,b);if(H.passed)H.reason&&v("".concat(H.reason));else{v.groupEnd(),v("  \uD83D\uDD3B ".concat(H.reason)),P=!1;break}}}catch(e){E=!0,F=e}finally{try{R||null==N.return||N.return()}finally{if(E)throw F}}P&&(v.groupEnd(),v("  ✅ ALL RULES PASS, injecting ".concat(y)),M.push({afterIndex:O,type:y}),k=(y=w[++j])?findRelevantRules(A,y,j):[])}return w.includes(i.Gate)&&(o=i.Gate,!M.find(function(e){return e.type===o}))&&M.push({afterIndex:B,type:i.Gate}),M},x=n(89135),A=n(42783),w=n(73874),I=n(51835),b=n(14721),j=n(22553),y=n(14944),k=n(5671),M=n.n(k);function _templateObject(){var e=(0,u._)(['\n  query ArticleArchiveModuleQuery($id: ID!, $preview: String) {\n    article(id: $id, preview: $preview) {\n      ... on MagazineArticle {\n        pdfUrl\n        issue {\n          url\n          cover(width: 80, height: 108, sizes: ["1x", "2x"]) {\n            id\n            url\n            srcSet\n            width\n            height\n          }\n        }\n      }\n    }\n  }\n']);return _templateObject=function(){return e},e}var B=(0,d.Ps)(_templateObject()),article_ArticleArchiveModule=function(e){var t=e.headerVariant,n=(0,j.$Y)(),r=n.articleId,o=n.previewParam,i=(0,l._)((0,d.aM)({query:B,variables:{id:r,preview:o}}),1)[0].data,a=(null==i?void 0:i.article.__typename)==="MagazineArticle"&&i.article;return a&&a.pdfUrl?(0,s.jsx)(y.Z,{className:M().root,hed:"View This Story as a PDF",dek:"See this story as it appeared in the pages of The Atlantic magazine.",url:a.pdfUrl,label:"Open",coverImage:a.issue.cover,modulePosition:void 0!==t&&t?"belowUtilityBar":"inline"}):null},csi_InjectedComponent=function(e){var t=e.type,n=e.num,r=e.adCount,o="inject-".concat(n);switch(t){case i.Ad:return(0,s.jsx)(x.Z,{targetingPos:"csi-ad-".concat(n),adCount:r},o);case i.Native:return(0,s.jsx)(I.Z,{},o);case i.House:return(0,s.jsx)(b.Z,{},o);case i.Recirc:return(0,s.jsx)(A.Z,{__typename:"ArticleRelatedContentModule",contentType:m.o9.Curated,index:0},o);case i.MagPromo:return(0,s.jsx)(A.Z,{__typename:"ArticleRelatedContentModule",contentType:m.o9.Magazine,index:0},o);case i.Archive:return(0,s.jsx)(article_ArticleArchiveModule,{headerVariant:0===n},o);case i.Context:return(0,s.jsx)(w.Z,{},o)}return(0,s.jsx)(function(){return(0,s.jsx)("div",{})},{},o)},csi_InjectorSlot=function(e){var t=e.index,n=useClientSideInjector().injectedItems,r=n.findIndex(function(e){return e.afterIndex===t});if(-1===r)return null;var o=n[r].type,a=n.filter(function(e,t){var n=e.type;return t<r&&n===i.Ad}).length;return(0,s.jsx)(csi_InjectedComponent,{type:o,num:r,adCount:a})},O=n(28401),S=n(79296),C=n(41006),P=n(81300);function ClientSideInjector_templateObject(){var e=(0,u._)(["\n  fragment clientSideInjectorContent on ArticleContentElement {\n    __typename\n    ... on ArticleParagraphContent {\n      subtype\n    }\n  }\n\n  fragment clientSideInjector on Article {\n    ... on MagazineArticle {\n      pdfUrl\n    }\n    categories {\n      slug\n    }\n    content {\n      ...clientSideInjectorContent\n    }\n    editorialProject {\n      river(first: 4, excludes: [$id]) {\n        edges {\n          node {\n            __typename\n          }\n        }\n      }\n    }\n    primaryCategory {\n      ... on LandingPage {\n        isFranchise\n      }\n    }\n    reviews {\n      id\n    }\n  }\n"]);return ClientSideInjector_templateObject=function(){return e},e}var csiContentTypenameCheck=function(e){var t=!1,n=!1,r=!1,o=!0,i=!1,a=void 0;try{for(var c,l=e[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value;switch(u.__typename){case"ArticleRelatedContentModule":u.contentType===m.o9.Magazine?n=!0:t=!0;break;case"ArticleAdPlaceholder":r=!0}}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return{hasRecirc:t,hasMagPromo:n,hasAdPlaceholder:r}},R=f.createContext({injectedItems:[],setRef:function(){}}),useClientSideInjector=function(){var e=(0,f.useContext)(R);if(void 0===e)throw Error("useContext must be used within a Provider");return e},injectedComponentFindIndex=function(e){var t=e.items,n=e.content,r=e.injectedFilter,o=e.contentFilter,i=t.findIndex(r),a=-1===i?-1:i+t[i].afterIndex,c=n.findIndex(o),l=t.filter(function(e){return e.afterIndex<c}).length,u=-1===c?-1:c+l;return a>-1&&u>-1?Math.min(a,u):a>-1?a:u},ClientSideInjector=function(e){var t,n=e.children,r=(0,c._)(e,["children"]),o=(0,f.useRef)([]),a=(0,l._)((0,f.useState)([]),2),u=a[0],d=a[1],m=(0,l._)((0,O.Z)("(max-width: 975px)","(max-width: ".concat(576,"px)")),2),p=m[0],g=m[1],h=(0,C.gG)(),v=h.hasPaywallLoaded,_=h.hideContent,x=(0,P.b)(),A=x.adsAbt,w=x.adsExperiment,I=f.Children.count(n),b="MagazineArticle"===r.__typename&&!!(null==r?void 0:r.pdfUrl),j=csiContentTypenameCheck(r.content),y=j.hasRecirc,k=j.hasAdPlaceholder,M=j.hasMagPromo,B=!r.categories.some(function(e){return"exclude-from-recirc"===e.slug})&&!y,E="MagazineArticle"===r.__typename&&!M,F=null===A||!v;(0,f.useEffect)(function(){if(!F){var e=injectItems(o.current.map(function(e){return e.contentElement}),o.current.map(function(e){return e.node}),{activeTestGroups:{},isMobile:p,isRecircFullWidth:g,adsExperiment:w,injectOrderOptions:{injectRecirc:B,injectMagPromo:E,injectArchiveModule:b,injectAds:!k,showGate:_}}),t=e.find(function(e){return e.type===i.Archive});b&&!t&&e.unshift({afterIndex:-1,type:i.Archive}),d(e)}},[p,w,b,I,E,B,g,F,k,_]);var T=I+u.filter(function(e){return e.afterIndex<I}).length,G=injectedComponentFindIndex({items:u,content:r.content,injectedFilter:function(e){return e.type===i.Recirc||e.type===i.MagPromo},contentFilter:function(e){return"ArticleRelatedContentModule"===e.__typename}});(0,f.useEffect)(function(){-1!==G&&(0,S.z6)().push({event:"Related Content Location",relatedContentLocation:"".concat(G+1," - ").concat(T)})},[G,T]);var D=(0,f.useCallback)(function(e,t,n){e&&(o.current[t]={node:e,contentElement:n})},[]),N=null===(t=u.find(function(e){return e.type===i.Gate}))||void 0===t?void 0:t.afterIndex;return(0,s.jsx)(R.Provider,{value:{setRef:D,injectedItems:u},children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(csi_InjectorSlot,{index:-1}),f.Children.map(n,function(e,t){return(0,s.jsxs)(f.Fragment,{children:[(void 0===N||t<=N)&&e,(0,s.jsx)(csi_InjectorSlot,{index:t})]},"injector-".concat(t))})]})})};ClientSideInjector.fragment=(0,d.Ps)(ClientSideInjector_templateObject());var E=ClientSideInjector},38173:function(e){e.exports={root:"HousePromo_root__aMPwY"}},5671:function(e){e.exports={root:"ArticleArchiveModule_root__ofoIO"}},12544:function(e){e.exports={root:"ArticleBooksDropdown_root__gI4sa",menuContainer:"ArticleBooksDropdown_menuContainer__8_DTr",button:"ArticleBooksDropdown_button__qe0m5",activeButton:"ArticleBooksDropdown_activeButton__3HZGN",dropDownContainer:"ArticleBooksDropdown_dropDownContainer__O8k6Y"}},2891:function(e){e.exports={root:"ArticleBooksModule_root__OU5jZ",list:"ArticleBooksModule_list__KYWf4",book:"ArticleBooksModule_book__HHrA4",noImage:"ArticleBooksModule_noImage__RRUUW",firstBook:"ArticleBooksModule_firstBook__e4f1H",picture:"ArticleBooksModule_picture__pT9lm",image:"ArticleBooksModule_image__L4ANj",textWrapper:"ArticleBooksModule_textWrapper__F29U2",title:"ArticleBooksModule_title__CijA5",link:"ArticleBooksModule_link__AEYwN",creator:"ArticleBooksModule_creator__kmwjl",button:"ArticleBooksModule_button__X85u4"}},33143:function(e){e.exports={root:"ArticleImageGroup_root__uQODp",figure:"ArticleImageGroup_figure__pHuYK",images:"ArticleImageGroup_images__Jn0Dm",figcaption:"ArticleImageGroup_figcaption__d1I8w",credit:"ArticleImageGroup_credit__2zqh_",captionWithCredit:"ArticleImageGroup_captionWithCredit__USyJQ",alignWell:"ArticleImageGroup_alignWell__WRKV6",alignOverflow:"ArticleImageGroup_alignOverflow__yzUH5",alignFullBleed:"ArticleImageGroup_alignFullBleed__Q2EzK"}},38053:function(e){e.exports={wrapper:"ArticleInlineVideo_wrapper__J7cOV",loaded:"ArticleInlineVideo_loaded__IqQ1W",video:"ArticleInlineVideo_video___s_3q",reducedMotionImage:"ArticleInlineVideo_reducedMotionImage__QrLN9"}},41476:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var o=r(n(57848)),i=n(26678);t.default=function(e,t){var n={};return e&&"string"==typeof e&&(0,o.default)(e,function(e,r){e&&r&&(n[(0,i.camelCase)(e,t)]=r)}),n}},26678:function(e,t){"use strict";t.__esModule=!0,t.camelCase=void 0;var n=/^--[a-zA-Z0-9-]+$/,r=/-([a-z])/g,o=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,capitalize=function(e,t){return t.toUpperCase()},trimHyphen=function(e,t){return"".concat(t,"-")};t.camelCase=function(e,t){var c;return(void 0===t&&(t={}),!(c=e)||o.test(c)||n.test(c))?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(a,trimHyphen):e.replace(i,trimHyphen)).replace(r,capitalize))}},57848:function(e,t,n){var r=n(18139);function StyleToObject(e,t){var n,o,i,a=null;if(!e||"string"!=typeof e)return a;for(var c=r(e),l="function"==typeof t,u=0,s=c.length;u<s;u++)o=(n=c[u]).property,i=n.value,l?t(o,i,n):i&&(a||(a={}),a[o]=i);return a}e.exports=StyleToObject,e.exports.default=StyleToObject}}]);