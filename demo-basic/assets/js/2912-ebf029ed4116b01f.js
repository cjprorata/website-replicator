"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2912],{94143:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(72253),a=n(14932),i=n(47702),o=n(82729),s=n(85893),l=n(9008),c=n.n(l),u=n(76163),d=n(22553),m=n(61178),p=n(34298),h=n(79296),f=n(67294),g=n(77477);function _templateObject(){var e=(0,o._)(["\n  fragment articleJsonLdAuthor on Author {\n    url\n    displayName\n  }\n\n  fragment articleJsonLdImage on BasicImage {\n    width\n    height\n    url\n  }\n\n  fragment articleJsonLdReview on Review {\n    id\n    title\n    creator\n    creatorUrl\n    purchaseUrl\n    image(width: 1080, height: 1080) {\n      url\n      width\n      height\n      srcSet\n      captionText\n      attributionText\n      attributionUrl\n      altText\n    }\n    content\n    url\n    ... on BookReview {\n      publisher\n      isbn\n    }\n    ... on EpisodeReview {\n      season\n      episode\n    }\n  }\n\n  fragment articleJsonLdData on Article {\n    url\n    title\n    seoTitle\n    dek\n    dateModified\n    datePublished\n    hasMeter\n    primaryChannel {\n      displayName\n    }\n    authors {\n      ...articleJsonLdAuthor\n    }\n    reviews {\n      ...articleJsonLdReview\n    }\n    shareImage1x1: shareImage(width: 1080, height: 1080) {\n      ...articleJsonLdImage\n    }\n    shareImage16x9: shareImage(width: 1600, height: 900) {\n      ...articleJsonLdImage\n    }\n    shareImage4x3: shareImage(width: 1200, height: 900) {\n      ...articleJsonLdImage\n    }\n    shareImageDefault: shareImage(width: 960, height: 540) {\n      ...articleJsonLdImage\n    }\n    shareImageSquareDefault: shareImage(width: 540, height: 540) {\n      ...articleJsonLdImage\n    }\n    shareImageLeadArt: leadArt {\n      ... on LeadArtImage {\n        image(width: 720, height: 405) {\n          ...articleJsonLdImage\n        }\n      }\n    }\n  }\n"]);return _templateObject=function(){return e},e}var isImage=function(e){return!!e},toJsonLdReview=function(e,t){var n,r=t.url,a=t.authors,i=t.dek,o=t.datePublished,s=t.shareImage1x1;return"BookReview"===e.__typename&&e.isbn?n={"@type":"Book",publisher:e.publisher?{"@type":"Organization",name:e.publisher}:void 0,author:{"@type":"Person",name:e.creator||void 0,sameAs:e.creatorUrl||void 0},name:e.title,isbn:e.isbn,url:e.purchaseUrl||void 0}:"MovieReview"===e.__typename&&e.url?n={"@type":"Movie",director:e.creator?{"@type":"Person",name:e.creator,sameAs:e.creatorUrl||void 0}:void 0,name:e.title,sameAs:e.url,image:(null==s?void 0:s.url)||void 0}:"MusicAlbumReview"===e.__typename&&e.url?n={"@type":"MusicAlbum",name:e.title,sameAs:e.url,byArtist:e.creator?{"@type":"MusicGroup",name:e.creator,sameAs:e.creatorUrl||void 0}:void 0}:"EpisodeReview"===e.__typename&&e.season&&(n={"@type":"Episode",name:e.title,sameAs:e.url||void 0,partOfSeason:{"@type":"CreativeWorkSeason",seasonNumber:e.season},episodeNumber:e.episode}),n&&{"@context":"https://schema.org","@type":"Review",url:r,author:a.map(function(e){return{"@type":"Person",name:e.displayName,sameAs:e.url}}),description:e.content||i||void 0,datePublished:o||void 0,publisher:{"@type":"Organization",name:"The Atlantic",sameAs:"https://www.theatlantic.com"},itemReviewed:n}},ArticleJsonLd=function(e){var t=e.title,n=e.seoTitle,a=e.url,i=e.dek,o=e.datePublished,l=e.dateModified,u=e.primaryChannel,d=e.authors,m=e.reviews,p=e.shareImage1x1,h=e.shareImage4x3,w=e.shareImage16x9,v=e.shareImageDefault,y=e.shareImageSquareDefault,_=e.shareImageLeadArt,A=e.hasMeter,x=[_&&"image"in _&&_.image,p,h,w,v,y].filter(isImage),b=!A;return(0,s.jsxs)(c(),{children:[(0,g.Z)({item:(0,r._)({"@context":"https://schema.org","@type":"NewsArticle",headline:n||t,alternativeHeadline:t,description:i||void 0,url:a,datePublished:o||void 0,dateModified:l||void 0,isAccessibleForFree:b,hasPart:{"@type":"WebPageElement",isAccessibleForFree:b,cssSelector:".article-content-body"},publisher:{"@id":"https://www.theatlantic.com/#publisher"},mainEntityOfPage:{"@type":"WebPage","@id":a}},x&&x.length&&{image:x.map(function(e){return{"@type":"ImageObject",width:{"@type":"QuantitativeValue",unitCode:"E37",value:e.width},height:{"@type":"QuantitativeValue",unitCode:"E37",value:e.height},url:e.url}})},d&&{author:d.map(function(e){return{"@type":"Person",name:e.displayName,sameAs:e.url}})},u&&{articleSection:u.displayName})}),m&&m.map(function(e,t){var n=toJsonLdReview(e,{url:a,authors:d,dek:i,datePublished:o,shareImage1x1:p});return n&&(0,s.jsx)(f.Fragment,{children:(0,g.Z)({item:n})},"ld+json-".concat(t))})]})};ArticleJsonLd.fragment=(0,u.Ps)(_templateObject());var w=n(248),v=n(8698),y=n(67700),_=n(63099),A=n(11163);function ArticleMetadata_templateObject(){var e=(0,o._)(["\n  fragment articleMetadata on Article {\n    __typename\n    id\n    title\n    seoTitle\n    shareTitle\n    shareText\n    dek\n    shareDek\n    url\n    fbiaUrl\n    canonicalUrl\n    hasMeter\n    datePublished\n    dateModified\n    syndication\n    shareImage2x1: shareImage(width: 1200, height: 625) {\n      url\n      height\n      width\n    }\n    shareImageGift2x1: shareImage(\n      width: 1200\n      height: 625\n      giftWatermark: true\n    ) {\n      url\n      height\n      width\n    }\n    shareImageGiftSmall: shareImage(\n      width: 960\n      height: 504\n      giftWatermark: true\n    ) {\n      url\n      height\n      width\n    }\n    shareImageSmall: shareImage(width: 960, height: 504) {\n      url\n      height\n      width\n    }\n    primaryChannel {\n      displayName\n    }\n    authors {\n      displayName\n      slug\n      socialMedia {\n        platform\n        url\n      }\n    }\n    channels {\n      slug\n    }\n    categories {\n      slug\n    }\n    editorialProject {\n      slug\n    }\n    watsonInfo {\n      keywords\n    }\n    leadArt {\n      ... on Cinemagraph {\n        formats {\n          encoding\n          url\n        }\n      }\n    }\n  }\n"]);return ArticleMetadata_templateObject=function(){return e},e}var ArticleMetadata=function(e){var t=e.__typename,n=e.id,r=e.title,a=e.seoTitle,i=e.shareTitle,o=e.shareText,l=e.dek,u=e.shareDek,d=e.url,m=e.canonicalUrl,p=e.authors,h=e.shareImage2x1,g=e.shareImageGift2x1,x=e.shareImageGiftSmall,b=e.shareImageSmall,j=e.fbiaUrl,I=e.hasMeter,k=e.categories,R=e.channels,E=e.editorialProject,P=e.primaryChannel,M=e.datePublished,C=e.dateModified,L=e.watsonInfo,T=e.syndication,G=e.leadArt,S=(0,v.aC)(),N=S.articleGift,O=S.isSocialBot,F=(null==N?void 0:N.articleId)===parseInt(n.split(":")[1]),J=(0,A.useRouter)().query,D=("string"==typeof J.gift&&"1"===J.gift||F)&&O?(null==g?void 0:g.url)||(null==x?void 0:x.url)||(null==h?void 0:h.url)||(null==b?void 0:b.url):(null==h?void 0:h.url)||(null==b?void 0:b.url),U="",B=(0,f.useMemo)(function(){var e=(0,w._)(R.map(function(e){return e.slug})).concat((0,w._)(k.filter(function(e){return 0!==e.slug.indexOf("top-")}).map(function(e){return e.slug})),(0,w._)(p.map(function(e){var t=e.slug;return"author-".concat(t)})));return E&&e.unshift(E.slug),e.join(",")},[R,k,E,p]);return(0,s.jsxs)(c(),{children:[(0,s.jsx)("meta",{name:"description",content:l||_.y},"description"),(0,s.jsx)("meta",{property:"krux:title",content:"".concat(a||r," - The Atlantic")},""),(0,s.jsx)("meta",{property:"krux:description",content:l||_.y},"krux:description"),(0,s.jsx)("link",{rel:"canonical",href:m||""},"canonical"),(0,s.jsx)("link",{rel:"image_src",href:(null==h?void 0:h.url)||_.R},"image_src"),p&&p.map(function(e,t){return U+=e.displayName+(t===p.length-1?"":", "),e.socialMedia.map(function(e){return"FACEBOOK"===e.platform&&(0,s.jsx)("meta",{property:"article:author",content:"https://www.facebook.com/".concat(e.url)},"article:author")})}),p&&(0,s.jsx)("meta",{name:"author",content:U},"author"),j&&(0,s.jsx)("link",{rel:"ia:markup_url",href:j},"ia:markup_url"),(0,s.jsx)("meta",{property:"article:publisher",content:"https://www.facebook.com/TheAtlantic/"},"article:publisher"),(0,s.jsx)("meta",{property:"article:opinion",content:"false"},"article:opinion"),(0,s.jsx)("meta",{property:"article:content_tier",content:I?"metered":"free"},"article:content_tier"),R.map(function(e){return(0,s.jsx)("meta",{property:"article:tag",content:e.slug},"article:tag")}),(0,s.jsx)("meta",{property:"article:section",content:null==P?void 0:P.displayName},"article:section"),(0,s.jsx)("meta",{property:"article:published_time",content:M||""},"article:published_time"),(0,s.jsx)("meta",{property:"article:modified_time",content:C||""},"article:modified_time"),M?(0,s.jsx)("meta",{name:"robots",content:"index, follow, max-image-preview:large"},"robots"):(0,s.jsx)("meta",{name:"robots",content:"noindex, nofollow"},"robots"),(0,s.jsx)("meta",{property:"og:title",content:i||r},"og:title"),(0,s.jsx)("meta",{property:"og:description",content:u||l||""},"og:description"),(0,s.jsx)("meta",{property:"og:url",content:F&&O?"".concat(d,"?gift=1"):d},"og:url"),(0,s.jsx)("meta",{property:"og:type",content:"article"},"og:type"),(0,s.jsx)("meta",{property:"og:image",content:D},"og:image"),(null==G?void 0:G.__typename)==="Cinemagraph"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("meta",{property:"og:video",content:G.formats[0].url||""},"og:video"),(0,s.jsx)("meta",{property:"og:video:type",content:"video/mp4"},"og:video:type")]}),(0,s.jsx)("meta",{property:"twitter:card",content:"summary_large_image"},"twitter:card"),(0,s.jsx)("meta",{name:"FacebookShareMessage",content:o||""},"FacebookShareMessage"),(0,s.jsx)("meta",{name:"TwitterShareMessage",content:o||""},"TwitterShareMessage"),(0,s.jsx)("link",{rel:"alternate",type:"application/rss+xml",title:"The Atlantic",href:"/feed/all/"},"feed-all"),(0,s.jsx)("link",{rel:"alternate",type:"application/rss+xml",title:"Best of The Atlantic",href:"/feed/best-of/"},"feed-best-of"),(0,s.jsx)("meta",{name:"referrer",content:"unsafe-url"},"referrer"),(0,s.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"},"apple-mobile-web-app-capable"),(0,s.jsx)("meta",{name:"apple-mobile-web-status-bar-style",content:"black"},"apple-mobile-web-status-bar-style"),(0,s.jsx)("meta",{name:"apple-mobile-web-app-title",content:"The Atlantic"},"apple-mobile-web-app-title"),(0,s.jsx)("meta",{name:"keywords",content:null==L?void 0:L.keywords.join(", "),itemID:"#keywords"},"keywords"),(0,s.jsx)("meta",{name:"news_keywords",content:null==L?void 0:L.keywords.join(", ")},"news_keywords"),"MagazineArticle"===t&&T===y.gC.None&&(0,s.jsx)("meta",{property:"flatplan-apple-news-magazine",content:"true"},"flatplan"),(0,s.jsx)("meta",{name:"sailthru.title",content:r},"sailthru.title"),l&&(0,s.jsx)("meta",{name:"sailthru.description",content:l},"sailthru.description"),(0,s.jsx)("meta",{name:"sailthru.tags",content:B},"sailthru.tags"),(0,s.jsx)("meta",{name:"sailthru.date",content:M||""},"sailthru.date"),(0,s.jsx)("link",{rel:"preload",as:"font",type:"font/woff2",href:"https://www.theatlantic.com/packages/fonts/garamond/AGaramondPro-Regular.woff2",crossOrigin:""},"AGaramondPro"),(0,s.jsx)("link",{rel:"preload",as:"font",type:"font/woff2",href:"https://www.theatlantic.com/packages/fonts/graphik/Graphik-Regular-Web.woff2",crossOrigin:""},"Graphik"),(0,s.jsx)("link",{rel:"preload",as:"font",type:"font/woff2",href:"https://www.theatlantic.com/packages/fonts/graphik/Graphik-Semibold-Web.woff2",crossOrigin:""},"GraphikSemibold"),(0,s.jsx)("link",{rel:"preload",as:"font",type:"font/woff2",href:"https://www.theatlantic.com/packages/fonts/logic/LogicMonospace-Medium.woff2",crossOrigin:""},"LogicMonospaceMedium"),(0,s.jsx)("link",{rel:"preload",as:"font",type:"font/woff2",href:"https://www.theatlantic.com/packages/fonts/logic/LogicMonospace-Regular.woff2",crossOrigin:""},"LogicMonospaceRegular")]})};function ArticlePage_templateObject(){var e=(0,o._)(["\n  ","\n  ","\n  ","\n  ","\n\n  fragment articlePage on Article {\n    title\n    seoTitle\n\n    ...articleContextProvider\n    ...articleMetadata\n    ...articleJsonLdData\n    ...articleAnalyticsFragment\n  }\n"]);return ArticlePage_templateObject=function(){return e},e}ArticleMetadata.fragment=(0,u.Ps)(ArticleMetadata_templateObject());var ArticlePage=function(e){var t=e.children,n=(0,i._)(e,["children"]);return(0,h.Px)({article:n}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c(),{children:(0,s.jsx)("title",{children:"".concat(n.seoTitle||n.title," - The Atlantic")})}),(0,s.jsx)(ArticleMetadata,(0,r._)({},n)),(0,s.jsx)(ArticleJsonLd,(0,r._)({},n)),(0,s.jsx)(d.sc,(0,a._)((0,r._)({},n),{children:(0,s.jsx)(p.oO,{children:(0,s.jsx)(m.qX,{children:t})})}))]})};ArticlePage.fragment=(0,u.Ps)(ArticlePage_templateObject(),d.sc.fragment,ArticleMetadata.fragment,ArticleJsonLd.fragment,h.yV);var x=ArticlePage},8093:function(e,t,n){n.d(t,{LI:function(){return getCorrectStatusError},TX:function(){return s},nm:function(){return throwCorrectStatus},s4:function(){return l}});var r=n(48564),a=n(18007),i=n(58894),o=n(79735),s=function(e){(0,a._)(NotFound,e);var t=(0,o._)(NotFound);function NotFound(){var e;return(0,r._)(this,NotFound),e=t.apply(this,arguments),e.statusCode=404,e}return NotFound}((0,i._)(Error)),l=function(e){(0,a._)(RenderNotSupported,e);var t=(0,o._)(RenderNotSupported);function RenderNotSupported(){var e;return(0,r._)(this,RenderNotSupported),e=t.apply(this,arguments),e.statusCode=456,e.statusMessage="Article render not supported",e}return RenderNotSupported}((0,i._)(Error)),getCorrectStatusError=function(e){var t=e.error;if(!t)return new s;if(t.networkError)return t.networkError;var n=t.graphQLErrors.map(function(e){var t,n;return null===(n=e.extensions)||void 0===n?void 0:null===(t=n.response)||void 0===t?void 0:t.status}).filter(Boolean);return(n.length||(n=t.graphQLErrors.map(function(e){var t=e.extensions,n=(void 0===t?{}:t).code;return"INTERNAL_SERVER_ERROR"===n||"GRAPHQL_VALIDATION_FAILED"===n||"GRAPHQL_PARSE_FAILED"===n?500:0}).filter(Boolean)),(null==n?void 0:n.sort(function(e,t){return t-e})[0])>=500)?(1!==t.graphQLErrors.length||t.stack||(t.stack=t.graphQLErrors[0].stack),t):new s},throwCorrectStatus=function(e){throw getCorrectStatusError({error:e.error})}},34298:function(e,t,n){n.d(t,{oO:function(){return ArticleGiftingContextProvider}});var r=n(11010),a=n(72253),i=n(14932),o=n(24043),s=n(82729),l=n(248),c=n(20414),u=n(85893),d=n(67294),m=n(96245),p=n(62286),h=n(8698),f=n(76163),g=n(31257);function _templateObject(){var e=(0,s._)(["\n  fragment articleGiftResult on ArticleGift {\n    key\n  }\n\n  fragment articleGiftError on CreateArticleGiftError {\n    error\n  }\n\n  mutation CreateArticleGift($articleId: Int!) {\n    createArticleGift(articleId: $articleId) {\n      usedArticleIds\n      ...articleGiftResult\n      ...articleGiftError\n    }\n  }\n"]);return _templateObject=function(){return e},e}var w={canGift:!1,giftedArticleIds:null,mutationResults:new Map},articleGiftingReducer=function(e,t){switch(t.type){case"AUTH":if(e.canGift===t.hasPaywallAccess)return e;return(0,i._)((0,a._)({},e),{canGift:t.hasPaywallAccess});case"PENDING_CREATE":if(e.mutationResults.get(t.articleId))return e;return(0,i._)((0,a._)({},e),{mutationResults:new Map((0,l._)(Array.from(e.mutationResults.entries())).concat([[t.articleId,{pending:!0}]]))});case"CREATE":var n=t.data,r=t.articleId,o=n&&"key"in n?n.key:void 0,s=n?"error"in n?"".concat(n.error):void 0:"UNKNOWN",c=new Map((0,l._)(Array.from(e.mutationResults.entries())).concat([[r,{pending:!1,key:o,error:s}]]));if(!n)return(0,i._)((0,a._)({},e),{mutationResults:c});return(0,i._)((0,a._)({},e),{canGift:!s,giftedArticleIds:new Set(n.usedArticleIds),mutationResults:c});case"LYTICS_ENTITY_READY":var u,d=t.data,m=new Date(d.event_last_seen["article.gifted"]||""),p=new Date;if(m.getUTCFullYear()<p.getUTCFullYear()||m.getUTCMonth()<p.getUTCMonth())return(0,i._)((0,a._)({},e),{giftedArticleIds:new Set});return(0,i._)((0,a._)({},e),{giftedArticleIds:new Set(null===(u=d.gifted_article_ids)||void 0===u?void 0:u.map(function(e){return parseInt(e)}))})}},v=(0,d.createContext)((0,i._)((0,a._)({},w),{dispatch:function(){return w}})),ArticleGiftingContextProvider=function(e){var t=e.children,n=(0,h.aC)(),r=n.isLoggedIn,s=n.hasPaywallAccess,l=(0,o._)((0,d.useReducer)(articleGiftingReducer,w),2),c=l[0],m=l[1],p=(0,g.Z)();return(0,d.useEffect)(function(){r&&m({type:"AUTH",hasPaywallAccess:!!s})},[r,s]),(0,d.useEffect)(function(){if(void 0!==p.event_last_seen){var e=p.event_last_seen;m({type:"LYTICS_ENTITY_READY",data:(0,i._)((0,a._)({},p),{event_last_seen:e})})}},[p]),(0,u.jsx)(v.Provider,{value:(0,i._)((0,a._)({},c),{dispatch:m}),children:t})},y=(0,f.Ps)(_templateObject());t.ZP=function(e){var t=(0,d.useContext)(v),n=t.mutationResults,a=t.giftedArticleIds,i=t.canGift,s=t.dispatch,l=n.get(e)||{},u=l.pending,h=l.key,g=l.error,w=(0,o._)((0,f.Db)(y),2)[1],_=(0,o._)((0,d.useState)(!1),2),A=_[0],x=_[1];(0,d.useEffect)(function(){var e,t=(0,p.parseCookies)().atljwt;try{x(!!(null===(e=(0,m.Z)(t))||void 0===e?void 0:e.staff))}catch(e){x(!1)}},[]);var b=(0,d.useCallback)((0,r._)(function(){var t,n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return[4,w({articleId:e})];case 1:if(n=(t=r.sent()).data,s({type:"CREATE",articleId:e,error:t.error,data:null==n?void 0:n.createArticleGift}),(null==n?void 0:n.createArticleGift)&&"key"in n.createArticleGift)return[2,n.createArticleGift.key];return[2]}})}),[s,w,e]),j=null==a?void 0:a.has(e);return(0,d.useMemo)(function(){return{canGift:i,isGifted:j,isStaff:A,createArticleGift:b,giftKey:h,pending:!!u,errorCode:g}},[i,j,A,b,h,u,g])}}}]);